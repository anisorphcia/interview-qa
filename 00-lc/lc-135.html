<script>
    var candy = function (ratings) {
        let n = ratings.length
        let res = new Array(n).fill(0)
        for (let i = 0; i < n; ++i) {
            if (i > 0 && ratings[i] > ratings[i - 1]) {
                res[i] = res[i - 1] + 1
            } else {
                res[i] = 1
            }
        }
        console.log('f', JSON.stringify(res))
        let sum = 0
        for (let i = n - 1; i >= 0; --i) {
            if (i > 0 && ratings[i] < ratings[i - 1]) {
                res[i - 1] = Math.max(res[i - 1], res[i] + 1)
            }
            sum += res[i]
        }
        console.log('s', JSON.stringify(res))
        return sum
    };
    let ratings = [1,3,5,7,8,3,2,2,1,4]
    console.log('r', JSON.stringify(ratings))
    candy(ratings)
</script>